// ==UserScript==
// @name         Spacing JS
// @version      1.1.0
// @description  Measure the spacing between elements on webpage. Hold down Alt (Windows) / Option (Mac) key, and move the cursor.
// @author       contact@stevenlei.com
// @namespace    stevenlei
// @grant        none
// @run-at       document-start
// @include      *://*
// ==/UserScript==

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Spacing=e():t.Spacing=e()}(this,(()=>(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function o(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function n(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,o||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==e(o)?o:o+""}var i=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.top=e.top,this.left=e.left,this.width=e.width,this.height=e.height,this.right=e.right,this.bottom=e.bottom},(e=[{key:"colliding",value:function(t){return!(this.top>t.bottom||this.right<t.left||this.bottom<t.top||this.left>t.right)}},{key:"containing",value:function(t){return this.left<=t.left&&t.left<this.width&&this.top<=t.top&&t.top<this.height}},{key:"inside",value:function(t){return t.top<=this.top&&this.top<=t.bottom&&t.top<=this.bottom&&this.bottom<=t.bottom&&t.left<=this.left&&this.left<=t.right&&t.left<=this.right&&this.right<=t.right}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function r(t,e,o){var n=e.getBoundingClientRect(),i=n.width,r=n.height,a=n.top,s=n.left,c=window.getComputedStyle(e).fontSize,p=document.createElement("div");p.classList.add("spacing-js-".concat(t,"-placeholder")),p.classList.add("spacing-js-placeholder"),p.style.border="2px solid ".concat(o),p.style.position="fixed",p.style.background="".concat(o,"08"),p.style.borderRadius="3px",p.style.padding="0",p.style.margin="0",p.style.width="".concat(i-2,"px"),p.style.height="".concat(r-2,"px"),p.style.top="".concat(a-1,"px"),p.style.left="".concat(s-1,"px"),p.style.pointerEvents="none",p.style.zIndex="9999",p.style.boxSizing="content-box",document.body.appendChild(p);var d=document.createElement("span");d.style.background=o,d.style.position="fixed",d.style.display="inline-block",d.style.color="#fff",d.style.padding="3px 6px",d.style.fontSize="11px",d.style.fontFamily="system-ui, -apple-system, sans-serif",d.style.fontWeight="500",d.style.lineHeight="1.2",d.style.whiteSpace="nowrap",d.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)";var u="",f=a;a<25?(a<0&&(f=0,u="↑ "),d.style.borderRadius="3px 0 3px 0"):(d.style.transform="translateY(calc(-100% + 2px))",d.style.borderRadius="3px 3px 0 0"),d.style.top="".concat(f-1,"px"),d.style.left="".concat(s-1,"px"),d.style.zIndex="10001",d.style.pointerEvents="none";var h=e.tagName.toLowerCase(),m="";try{if(e.className&&"string"==typeof e.className&&e.className.trim())m=".".concat(e.className.split(" ")[0]);else if(e.className&&"object"===l(e.className)){var y=e.className;y.baseVal&&"string"==typeof y.baseVal&&(m=".".concat(y.baseVal.split(" ")[0]))}}catch(t){m=""}var b="".concat(h).concat(m);d.innerText="".concat(u).concat(Math.round(i),"×").concat(Math.round(r),"px ").concat(b).concat(c?" (".concat(c,")"):""),p.appendChild(d)}function a(t){var e;null===(e=document.querySelector(".spacing-js-".concat(t,"-placeholder")))||void 0===e||e.remove()}function s(t,e,o,n,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",r=document.createElement("span");r.style.backgroundColor="red",r.style.position="fixed",r.classList.add("spacing-js-marker"),r.style.width="".concat(t,"px"),r.style.height="".concat(e,"px"),"x"===l&&(r.style.borderLeft="1px solid rgba(255, 255, 255, .8)",r.style.borderRight="1px solid rgba(255, 255, 255, .8)"),"y"===l&&(r.style.borderTop="1px solid rgba(255, 255, 255, .8)",r.style.borderBottom="1px solid rgba(255, 255, 255, .8)"),r.style.pointerEvents="none",r.style.top="".concat(o,"px"),r.style.left="".concat(n,"px"),r.style.zIndex="9998",r.style.boxSizing="content-box";var a=document.createElement("span");if(a.classList.add("spacing-js-value"),a.style.backgroundColor="red",a.style.color="white",a.style.fontSize="10px",a.style.display="inline-block",a.style.fontFamily="Helvetica, sans-serif",a.style.fontWeight="bold",a.style.borderRadius="20px",a.style.position="fixed",a.style.width="42px",a.style.lineHeight="15px",a.style.height="16px",a.style.textAlign="center",a.style.zIndex="10000",a.style.pointerEvents="none",a.innerText=i,a.style.boxSizing="content-box","x"===l){var s=o+e/2-7;s>document.documentElement.clientHeight-20&&(s=document.documentElement.clientHeight-20),s<0&&(s=6),a.style.top="".concat(s,"px"),a.style.left="".concat(n+6,"px")}else if("y"===l){var c=n+t/2-20;c>document.documentElement.clientWidth-48&&(c=document.documentElement.clientWidth-48),c<0&&(c=6),a.style.top="".concat(o+6,"px"),a.style.left="".concat(c,"px")}document.body.appendChild(r),document.body.appendChild(a)}function c(t,e,o,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("top"===o){var l=Math.abs(t.top-e.top),r=Math.floor((Math.min(t.right,e.right)+Math.max(t.left,e.left))/2),a=Math.min(t.top,e.top);if(i){if(t.top<e.top)return;if(t.right<e.left||t.left>e.right)return;l=Math.abs(e.bottom-t.top),a=Math.min(e.bottom,t.top)}s(1,l,a,r,n,"x")}else if("left"===o){var c=Math.abs(t.left-e.left),p=Math.floor((Math.min(t.bottom,e.bottom)+Math.max(t.top,e.top))/2),d=Math.min(t.left,e.left);if(i){if(t.left<e.left)return;if(t.bottom<e.top||t.top>e.bottom)return;c=Math.abs(t.left-e.right),d=Math.min(e.right,t.left)}s(c,1,p,d,n,"y")}else if("right"===o){var u=Math.abs(t.right-e.right),f=Math.floor((Math.min(t.bottom,e.bottom)+Math.max(t.top,e.top))/2),h=Math.min(t.right,e.right);if(i){if(t.left>e.right)return;if(t.bottom<e.top||t.top>e.bottom)return;u=Math.abs(t.right-e.left)}s(u,1,f,h,n,"y")}else if("bottom"===o){var m=Math.abs(t.bottom-e.bottom),y=Math.min(t.bottom,e.bottom),b=Math.floor((Math.min(t.right,e.right)+Math.max(t.left,e.left))/2);if(i){if(e.bottom<t.top)return;if(t.right<e.left||t.left>e.right)return;m=Math.abs(t.bottom-e.top)}s(1,m,y,b,n,"x")}}function p(){document.querySelectorAll(".spacing-js-marker").forEach((function(t){t.remove()})),document.querySelectorAll(".spacing-js-value").forEach((function(t){t.remove()}))}var d,u,f=!1,h=null,m=!1,y=null,b=!1;function g(t){m&&(w(),y&&(clearTimeout(y),y=null)),"Alt"===t.key&&(t.preventDefault(),b=!0,!f&&h&&(f=!0,h&&h!==d&&(d=h,a("selected"),r("selected",d,"red")),S(!0))),t.shiftKey&&(m=!0)}function v(t){"Alt"===t.key&&(b=!1,f&&(y=setTimeout((function(){w()}),m?3e3:0)))}function x(t){var e=t.relatedTarget;b||e&&"HTML"!==e.nodeName||(h=null,w())}function w(){f=!1,a("selected"),a("target"),m=!1,d=null,u=null,p(),S(!1)}function M(t){(h=t.composedPath?t.composedPath()[0]:t.target)&&(h.classList.contains("spacing-js-marker")||h.classList.contains("spacing-js-value")||h.classList.contains("spacing-js-placeholder"))||f&&new Promise((function(t,e){f&&h&&h!==d&&h!==u&&(u=h,a("target"),r("target",u,"blue"),t())})).then((function(){if(null!=d&&null!=u){var t,e,o,n,l,r=d.getBoundingClientRect(),a=u.getBoundingClientRect(),s=new i(r),f=new i(a);p(),s.containing(f)||s.inside(f)||s.colliding(f)?(t=Math.round(Math.abs(r.top-a.top)),e=Math.round(Math.abs(r.bottom-a.bottom)),o=Math.round(Math.abs(r.left-a.left)),n=Math.round(Math.abs(r.right-a.right)),l=!1):(t=Math.round(Math.abs(r.top-a.bottom)),e=Math.round(Math.abs(r.bottom-a.top)),o=Math.round(Math.abs(r.left-a.right)),n=Math.round(Math.abs(r.right-a.left)),l=!0),t>0&&c(s,f,"top",E(t),l),e>0&&c(s,f,"bottom",E(e),l),o>0&&c(s,f,"left",E(o),l),n>0&&c(s,f,"right",E(n),l)}}))}function E(t){return 0===t?"0px":t<1?"<1px":"".concat(t,"px")}function S(t){t?(window.addEventListener("DOMMouseScroll",L,!1),window.addEventListener("wheel",L,{passive:!1}),window.addEventListener("mousewheel",L,{passive:!1})):(window.removeEventListener("DOMMouseScroll",L),window.removeEventListener("wheel",L),window.removeEventListener("mousewheel",L))}function L(t){t.preventDefault()}return{start:function(){document.body?(window.addEventListener("keydown",g),window.addEventListener("keyup",v),window.addEventListener("mousemove",M),window.addEventListener("mouseout",x)):console.warn("Unable to initialise, document.body does not exist.")},stop:function(){window.removeEventListener("keydown",g),window.removeEventListener("keyup",v),window.removeEventListener("mousemove",M),window.removeEventListener("mouseout",x),w(),f=!1,h=null,d=null,u=null,m=!1,b=!1,y&&(clearTimeout(y),y=null)}}.start(),t=t.default})()));
//# sourceMappingURL=spacing.min.js.map